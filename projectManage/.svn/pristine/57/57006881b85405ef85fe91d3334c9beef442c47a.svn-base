package com.linkGap.projectManage.service.impl;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.linkGap.projectManage.dao.ProjectInfoMapper;
import com.linkGap.projectManage.model.EUDataGridResult;
import com.linkGap.projectManage.model.ReturnResultUtil;
import com.linkGap.projectManage.model.view.ProjectListCount;
import com.linkGap.projectManage.model.view.ProjectListView;
import com.linkGap.projectManage.model.view.ProjectRequestParams;
import com.linkGap.projectManage.service.ProjectService;
@Service
public class ProjectServiceImpl implements ProjectService {
    
	@Autowired
	private ProjectInfoMapper  projectInfoMapper;
	@Override
	public ReturnResultUtil queryList(ProjectRequestParams params) {
		List<ProjectListView> list=projectInfoMapper.queryList(params);
		ReturnResultUtil result=new ReturnResultUtil();
		result.setResultValue(list);
		Map<String,Integer> projectTypeMap=new HashMap<String,Integer>();
		List<ProjectListCount> countlist=projectInfoMapper.getTotalByParams(params);
		if(countlist!=null&&countlist.size()>0){
			for (ProjectListCount projectListCount : countlist) {
				if(projectListCount.getType().equals("1")){
					 projectTypeMap.put("fordispatching", projectListCount.getCount());
				}else if(projectListCount.getType().equals("2")){
					 projectTypeMap.put("ongoing", projectListCount.getCount());
				}else if(projectListCount.getType().equals("3")){
					 projectTypeMap.put("completed", projectListCount.getCount());
				}
			}
		}
		result.setExtras(projectTypeMap);
		return result;
	}

}
